<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="bootstyle.css">
    <script src="src/nav.js"></script>
    <title>face-test</title>


    <!-- fontawesome 사이트 아이콘 사용을 위한 스크립트 -->
    <script src="https://kit.fontawesome.com/2d323a629b.js" crossorigin="anonymous"></script>
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v5.15.3/js/all.js" crossorigin="anonymous"></script>

    <!-- font 사용을 위한 링크 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro&display=swap" rel="stylesheet">
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet"
        type="text/css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Do+Hyeon&family=Gugi&family=IBM+Plex+Sans+KR:wght@400;600;700&family=Jua&display=swap"
        rel="stylesheet">
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" />
</head>

<body id="page-top">
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top bg-transparent" id="mainNav">
        <div class="container">
            <a class="navbar-brand" href="#page-top">AI TEST</a>
            <!-- <button class="navbar-toggler text-uppercase font-weight-bold bg-transparent text-white rounded" type="button"
                data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive"
                aria-expanded="false" aria-label="Toggle navigation">
                Menu
                <i class="fas fa-bars"></i>
            </button> -->
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded"
                            href="#portfolio">Test1</a></li>
                    <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded"
                            href="#about">Test2</a></li>
                    <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded"
                            href="#contact">Test3</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Masthead-->
    <header class="masthead">
        <div class="container">
           <!-- Masthead Heading-->
            <div class="masthead-subheading" style="font-family: 'IBM Plex Sans KR';">나와 닮은 캐릭터를 찾아보세요!</div>

            <div id="title" class="masthead-heading text-uppercase" style="font-family: 'Gugi'; font-weight: 400;">나의 디즈니 짝꿍은?
            </div>
           
            <a class="btn btn-primary btn-xl text-uppercase js-scroll-trigger bg-transparent" href="#portfolio"
                style="font-family: 'IBM Plex Sans KR'; font-weight: 300;">시작하기</a>
        </div>
    </header>


    <section class="section">
        <h1 class="title"> 닮은 캐릭터 테스트</h1>
        <h2 class="subtitle"> 나와 닮은 디즈니 캐릭터를 여러 방식으로 찾아보세요!</h2>
    </section>

    <!-- Portfolio Section -->
    <section class="page-section portfolio" id="portfolio">
        <div class="container">
            <div class="text-center">
                <!-- <h2 class="section-heading text-uppercase" style="font-family: 'GmarketSansMedium';">닮은 캐릭터 테스트</h2>
                <h3 class="section-subheading text-muted" style="font-family: 'GmarketSansLight';">나와 닮은 캐릭터를 여러 방식으로
                    찾아보세요!</h3> -->
            </div>
            <div class="row">
                <div class="col-lg-4 col-sm-6 mb-4">
                    <div class="portfolio-item">
                        <a class="portfolio-link" data-toggle="modal" href="">
                            <div class="portfolio-hover">
                                <div class="portfolio-hover-content"><svg class="svg-inline--fa fa-plus fa-w-14 fa-3x"
                                        aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus"
                                        role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"
                                        data-fa-i2svg="">
                                        <path fill="currentColor"
                                            d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z">
                                        </path>
                                    </svg><i class="fas fa-plus fa-3x"></i>
                                    <!-- Font Awesome fontawesome.com -->
                                </div>
                            </div>
                        </a><a href="mbti_intro.html">
                            <img class="img-fluid" src="img/portfolio/01-thumbnail.jpg" alt="">
                        </a>

                        <div class="portfolio-caption">
                            <a href="mbti_intro.html">
                                <div class="portfolio-caption-heading"
                                    style="color: black; font-family: 'GmarketSansMedium';">닮은 성격 테스트</div>
                                <div class="portfolio-caption-subheading text-muted"
                                    style="font-family: 'GmarketSansLight';">MBTI 기반 나와 닮은 성격의 디즈니 캐릭터 찾기</div>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-sm-6 mb-4">
                    <div class="portfolio-item">
                        <a class="portfolio-link" data-toggle="modal" href="">
                            <div class="portfolio-hover">
                                <div class="portfolio-hover-content"><svg class="svg-inline--fa fa-plus fa-w-14 fa-3x"
                                        aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus"
                                        role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"
                                        data-fa-i2svg="">
                                        <path fill="currentColor"
                                            d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z">
                                        </path>
                                    </svg><i class="fas fa-plus fa-3x"></i>
                                    <!-- Font Awesome fontawesome.com -->
                                </div>
                            </div>
                        </a><a href="AI.html">
                            <img class="img-fluid" src="img/portfolio/02-thumbnail.jpg" alt="">
                        </a>

                        <div class="portfolio-caption">
                            <a href="AI.html">
                                <div class="portfolio-caption-heading"
                                    style="color: black; font-family: 'GmarketSansMedium';">닮은 디즈니상 테스트</div>
                                <div class="portfolio-caption-subheading text-muted"
                                    style="font-family: 'GmarketSansLight';">인공지능 기반 나와 닮은 외모의 디즈니 캐릭터 찾기</div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>


        <!-- File Upload Section -->
        <script class="jsbin" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

        <div class="file-upload">

            <div class="image-upload-wrap">
                <input class="file-upload-input" type='file' onchange="readURL(this);" accept="image/*" />
                <div class="drag-text">
                    <h3>Drag and drop a file or select add Image</h3>
                </div>
            </div>
            <div class="file-upload-content">
                <img class="file-upload-image" id="face-image" src="#" alt="your image" />
                <p class="result-message"></p>

                <div id="label-container"></div>
                <div class="image-title-wrap">
                    <button type="button" onclick="removeUpload()" class="remove-image"> Remove </button>
                </div>
            </div>
        </div>


        <!-- Option 1: Bootstrap Bundle with Popper -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
            crossorigin="anonymous"></script>

        <!-- Teachable Machine Model -->
        <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
        <script
            src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>

        <script type="text/javascript">

            //결과값을 넣기위한 변수 생성
            let result;
            // 버튼 이벤트를 위한 dom선택
            let btn = document.querySelector(".btn-start");


            // More API functions here:
            // https://github.com/googlecreativelab/teachablemachine-community/tree/master/libraries/image

            // the link to your model provided by Teachable Machine export panel
            const URL = "https://teachablemachine.withgoogle.com/models/dBgYEF7y2/";

            let model, labelContainer, maxPredictions;

            // Load the image model and setup the webcam
            async function init() {
                const modelURL = URL + "model.json";
                const metadataURL = URL + "metadata.json";

                // load the model and metadata
                // Refer to tmImage.loadFromFiles() in the API to support files from a file picker
                // or files from your local hard drive
                // Note: the pose library adds "tmImage" object to your window (window.tmImage)
                model = await tmImage.load(modelURL, metadataURL);
                maxPredictions = model.getTotalClasses();

                // append elements to the DOM
                labelContainer = document.getElementById("label-container");
                for (let i = 0; i < maxPredictions; i++) { // and class labels
                    labelContainer.appendChild(document.createElement("div"));
                }
            }

            // run the webcam image through the image model
            async function predict() {
                // predict can take in an image, video or canvas html element
                var image = document.getElementById("face-image")
                const prediction = await model.predict(image, false);

                if (prediction[0].className == 'Anna' && prediction[0].probability.toFixed(2) > 0.60) {
                    window.location.href = "./Anna.html";
                } else if (prediction[1].className == 'Rapunzel' && prediction[1].probability.toFixed(2) > 0.60) {
                    window.location.href = "./Rapunzel.html";
                } else if (prediction[2].className == 'Moana' && prediction[2].probability.toFixed(2) > 0.60) {
                    window.location.href = "./Moana.html";
                } else if (prediction[3].className == 'Elsa' && prediction[3].probability.toFixed(2) > 0.60) {
                    window.location.href = "./Elsa.html";
                } else if (prediction[4].className == 'Mulan' && prediction[4].probability.toFixed(2) > 0.60) {
                    window.location.href = "./Mulan.html";
                }

            }
        </script>
        <!-- File read or removeUpload -->
        <script>
            function readURL(input) {
                if (input.files && input.files[0]) {

                    var reader = new FileReader();

                    reader.onload = function (e) {
                        $('.image-upload-wrap').hide();

                        $('.file-upload-image').attr('src', e.target.result);
                        $('.file-upload-content').show();

                        $('.image-title').html(input.files[0].name);
                    };

                    reader.readAsDataURL(input.files[0]);

                    init().then(() => {
                        console.log("hello");
                        predict();
                        console.log(predict());
                    });

                } else {
                    removeUpload();
                }

            }

            function removeUpload() {
                $('.file-upload-input').replaceWith($('.file-upload-input').clone());
                $('.file-upload-content').hide();
                $('.image-upload-wrap').show();
            }
            $('.image-upload-wrap').bind('dragover', function () {
                $('.image-upload-wrap').addClass('image-dropping');
            });
            $('.image-upload-wrap').bind('dragleave', function () {
                $('.image-upload-wrap').removeClass('image-dropping');
            });
        </script>

        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="script.js"></script>
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <!-- * *                               SB Forms JS                               * *-->
        <!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>

</body>

</html>